<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    #btn{
        background-color: #b05d2d;
        width:180px;
        height: 80px;
        margin: 30px 0 0 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        right: 50px;
        top: 0px;
        border-radius: 10px;
        color: white;
        font-weight: 700;
        font-size: 20px;
        cursor: pointer;
    }
</style>
<script>
    document.addEventListener("DOMContentLoaded",()=>{
        let location_link
        let service
        let service_name
        const h1 = document.querySelector('h1')
        h1.innerHTML = `${service} 구독 취소하기`

        fetch("http://127.0.0.1:8000/api/members/"+window.localStorage.getItem('name')+"/subscribe-lists",{
            method: "GET",
        })
        .then((result) => {console.log(result);
            let data4 = [];
    
            (async () => {
            data4 = await result.json();
            console.log(data4);
            if(data.name == "유튜브 프리미엄"){
                service = "Youtube Premium"
                location_link = "https://www.youtube.com/paid_memberships"
                service_name = document.getElementById('youtube')
            } else if(data.name == "netflix"){
                service = "netflix"
                location_link = "https://www.netflix.com/cancelplan"
                service_name = document.getElementById('netflix')
            }
            h1.innerHTML = `${service} 구독 취소하기`
            service_name.style.display = "block"
            })();
        })
        .then((data4)=> {
            console.log(data4);
        })
        .catch((error)=>{
            console.log(error);
        });
    })
    function go(){
        location.href = `${location_link}`
    }
</script>
<body>
    <h1 style="margin-left: 50px"></h1>
    <div id="btn" onclick="go()">지금 취소하기</div>
    <div style="display: none" id="youtube">
        <img style="height:500px" src="/img/youtube_withdrawal.gif">
    </div>
    <div style="display: none" id="netflix">
        <img style="height:500px" src="/img/netflix_withdrawal.PNG">
    </div>
</body>
</html>